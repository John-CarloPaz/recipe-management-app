<div id="like_button_<%= recipe.id %>" class="flex items-center">
  <% if current_user %>
    <% user_like = recipe.likes.find_by(user: current_user) %>
    <% if user_like %>
      <!-- User has liked - show red heart -->
      <%= button_to recipe_like_path(recipe, user_like), 
          method: :delete,
          class: "bg-transparent border-0 p-0 flex items-center hover:opacity-75 transition-opacity cursor-pointer",
          form: { 
            data: { turbo: true },
            style: "display: inline;" 
          } do %>
        <%= heroicon "heart", class: "w-5 h-5 text-red-500 fill-current", 
            aria: { label: "unlike-recipe" } %>
      <% end %>
    <% else %>
      <!-- User hasn't liked - show gray heart -->
      <%= button_to recipe_likes_path(recipe), 
          method: :post,
          class: "bg-transparent border-0 p-0 flex items-center hover:text-red-500 transition-colors cursor-pointer",
          form: { 
            data: { turbo: true },
            style: "display: inline;" 
          } do %>
        <%= heroicon "heart", class: "w-5 h-5 text-neutral-500", 
            aria: { label: "like-recipe" } %>
      <% end %>
    <% end %>
  <% else %>
    <!-- Not logged in - show static heart -->
    <%= link_to login_path, class: "flex items-center hover:text-red-500 transition-colors" do %>
      <%= heroicon "heart", class: "w-5 h-5 text-neutral-500", 
          aria: { label: "login-to-like" } %>
    <% end %>
  <% end %>
  <p class="ml-2 text-neutral-500"><%= recipe.likes.count %> <%= recipe.likes.count == 1 ? 'Like' : 'Likes' %></p>
</div>